import { generarRespuesta } from "./respuestas.js";
import { generarRespuestaAvanzada } from "./respuestas_inteligentes.js";
import { expandirTexto } from "./diccionario_expandido.js";

export async function procesarMensaje(texto, contextoPrevio = null, usuario = null) {
  const msg = expandirTexto(texto.toLowerCase().trim());

  if (["hola", "buenas", "saludos"].some(p => msg.includes(p))) {
    return "ğŸ‘‹ Hola, soy Zara IA de Body Elite. Â¿QuÃ© zona te gustarÃ­a mejorar?";
  }

  const respuesta = generarRespuestaAvanzada(msg) || generarRespuesta(msg);
  if (respuesta) return respuesta;

  return "âœ¨ Soy Zara IA de Body Elite. Puedo orientarte sobre tratamientos faciales o corporales. CuÃ©ntame quÃ© zona te gustarÃ­a trabajar.";
}
